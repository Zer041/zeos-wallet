<html>
<head>
<script>
// source: https://stackoverflow.com/questions/32215538/using-filereader-readasarraybuffer-on-changed-files-in-firefox
function ReadFile()
{
  var input = document.getElementsByTagName("input")[0];
  var output = document.getElementsByTagName("textarea")[0];

  if(input.files.length === 0)
  {
    output.value = 'No file selected';
    return;
  }

  var fr = new FileReader();
  
  fr.onload = function() {
    var data = fr.result;
    var array = new Uint8Array(data);
    console.log(array);
  };
  fr.readAsArrayBuffer(input.files[0]);
}
</script>

<script type="module">
// source: https://developer.mozilla.org/en-US/docs/WebAssembly/Rust_to_wasm
import init, {greet, processFile} from "./pkg/rustzeos.js";

window.Execute = function(str) {
    init().then(() => {
        greet(str),
        console.log(processFile("WebAssembly"))
    });
}
</script>
</head>
<body>

<input type="file" />
<br/>
<textarea cols="80" rows="10"></textarea>
<br />
<button onclick="ReadFile()">ReadFile</button>
<button onclick="Execute('miau')">Execute</button>


<script>
// self executing function here
(function() 
{

})();
</script>
</body>
</html>
